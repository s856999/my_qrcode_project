{% extends "layout.html" %}
{% block title %}
服務員點餐
{% endblock %}

{% block main %}
<h1 class="text-center mb-4">{{ restaurant.restaurant_name }}</h1>

<form action="/waiter_order" method="post">
  <div class="mb-3 text-center">
    <label>用餐方式：</label>
    <select name="int_out" required class="form-select d-inline w-auto ms-2">
      <option value="內用">內用</option>
      <option value="外帶">外帶</option>
    </select>
  </div>

  <!-- 手風琴開始 -->
  <div class="accordion" id="menuAccordion">
    {% for category, items in menu_items_by_category.items() %}
    <div class="accordion-item">
      <h2 class="accordion-header" id="heading{{ loop.index }}">
        <button class="accordion-button {% if not loop.first %}collapsed{% endif %}" type="button" data-bs-toggle="collapse"
          data-bs-target="#collapse{{ loop.index }}" aria-expanded="{{ 'true' if loop.first else 'false' }}"
          aria-controls="collapse{{ loop.index }}">
          {{ category }}
        </button>
      </h2>
      <div id="collapse{{ loop.index }}" class="accordion-collapse collapse {% if loop.first %}show{% endif %}"
        aria-labelledby="heading{{ loop.index }}" data-bs-parent="#menuAccordion">
        <div class="accordion-body">
          <div class="row row-cols-1 row-cols-md-3 g-4">
            {% for item in items %}
            <div class="col">
              <div class="card h-100">
                {% if item.image %}
                <img src="{{ url_for('static', filename='uploads/' + item.image) }}" class="card-img-top"
                  alt="{{ item.name }}" style="height:180px; object-fit:cover;">
                {% endif %}
                <div class="card-body d-flex flex-column">
                  <h5 class="card-title">{{ item.name }}</h5>
                  <p class="card-text">價格：{{ item.price }} 元</p>
                  <div class="mb-2">
                    <label>數量：</label>
                    <input type="number" name="qty_{{ item.id }}" min="0" value="0" class="form-control">
                  </div>
                  <div class="mb-2">
                    <label>備註：</label>
                    <input type="text" name="remark_{{ item.id }}" class="form-control" autocomplete="off">
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  <!-- 手風琴結束 -->

  <div class="text-center mt-4">
    <button type="submit" class="btn btn-primary btn-lg"  onclick="return confirm('請核對清楚，確定送出訂單嗎？');">送出訂單</button>
  </div>
</form>


{% endblock %}